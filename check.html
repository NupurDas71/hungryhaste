<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout Page</title>

    
<link rel="stylesheet" href="style.css">
<link href=" https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css " rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link href=" https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css "  rel="stylesheet">

</head>
<body>
    <nav class="bg-yellow-400 fixed w-full shadow-md  flex items-center justify-between px-3 z-50  py-3">
        
        <!-- Logo (Centered) -->
     

        <!-- Mobile & Desktop Menu -->
        <ul class="flex justify-between items-center w-full ">
            <!-- Logo (Left Side) -->
            <div class="flex items-center  w-20 h-10 ">

                <a href="next.html" class="flex items-center justify-center">
                    <img src="Screenshot 2025-02-20 105303.png" class=" flex h-12 w-20">
                </a>
                   
                <!-- Location -->
            </div>
            <!-- Navigation Items (Right Side) -->
            <div class="flex items-center gap-6">
                <li>
                    <a href="next.html" class="font-bold text-lg transition-colors duration-300 hover:text-red-500 mr-2">Home</a>
                </li>
        
                <!-- Cart -->
                <li class="flex items-center">
                    <a href="ser.html" class="flex items-center">
                        <img src="https://cdn2.iconfinder.com/data/icons/actinia-basic-user-interface/24/archive-delete-1024.png" class="h-6">
                        <span class="ml-1 font-bold text-lg hidden md:inline transition-colors duration-300 hover:text-red-500">Cart</span>
                    </a>
                </li>
            </div>
        </ul>
        
        

</nav>


    <header class="relative w-full bg-cover bg-center text-white flex justify-center items-center" style="height: 400px; background-image: url('https://fascinatingfoodie.wordpress.com/wp-content/uploads/2018/05/dsc_0498.jpg?w=1000');">
        <h1 class="text-3xl font-bold">Check Out</h1>
    </header>
<div class="containerfrom max-w-lg mx-auto p-6 bg-white shadow-lg rounded-lg mt-10">

    <h2 class="text-4xl font-bold text-center text-red-400 mb-6">Checkout Form</h2>
    
    <!-- Form -->
    <form id="checkoutForm">
        <!-- Name -->
        <div class="mb-4">
            <label for="name" class="form-label text-xl font-semibold block text-pink-500 ">Full Name</label>
            <input type="text" id="name" class="w-full p-2 mt-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400" placeholder="Enter your full name">
            <div id="nameError" class="error">Name is required.</div>
        </div>

        <!-- Email -->
        <div class="mb-4">
            <label for="email" class="form-label  text-xl font-bold text-pink-500">Email</label>
            <input type="email" id="email" class="w-full p-2 mt-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400" placeholder="Enter your email">
            <div id="emailError" class="error">Invalid email format.</div>
        </div>

        <!-- Phone -->
        <div class="mb-4">
            <label for="phone" class="form-label  text-xl font-bold text-pink-500">Phone Number</label>
            <input type="tel" id="phone" class="w-full p-2 mt-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400" placeholder="Enter your phone number">
            <div id="phoneError" class="error">Enter a valid 10-digit phone number.</div>
        </div>

        <!-- Country -->
        <div class="mb-3"> 
            <label for="country" class="form-label  text-xl font-bold text-pink-500">Country</label>
            <input type="text" id="country" class="w-full p-2 mt-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400" placeholder="Enter your country">
            <div id="countryError" class="error">Country is required.</div>
        </div>
</form>
      <!-- Payment Method -->
      <p class="text-green-900 font-extrabold text-2xl mb-6">Payment Summary</p>

<!-- Display the total amount from the first page -->
<p class="text-yellow-900 text-lg mb-2">Order Total: ‚Çπ<span id="orderTotal" class="font-semibold text-xl"></span></p>

<!-- Delivery charge -->
<p class="text-yellow-700 text-lg mb-4">Delivery Charge: ‚Çπ<span id="deliveryCharge" class="font-semibold text-xl"></span></p>

<!-- Payment method section -->



    <!-- Payment Methods (Inline) -->
    <div class="p-2 bg-white rounded-lg shadow-lg space-y-4  max-w-xl mx-2">
        <!-- Payment Method Title -->
        <p class="text-xl font-semibold text-center">Select Payment Method:</p>
    
        <!-- Payment Methods (Inline) -->
        <div class="flex justify-between items-center gap-4">
            <!-- Cash Option -->
            <label class="flex items-center cursor-pointer space-x-2 p-2">
                <input type="radio" name="paymentMethod" value="cash" id="cashPayment" onchange="togglePaymentMethod('cash')" class="form-radio text-green-600 focus:ring-2 focus:ring-green-400">
                <span class="text-gray-700 flex items-center">
                    <img src="https://cdn-icons-png.flaticon.com/512/9198/9198191.png" alt="Cash" class="w-10 h-10 mr-2">
                    Cash on Delivery
                </span>
            </label>
    
            <!-- Card (Razorpay) Option -->
            <label class="flex items-center cursor-pointer space-x-2 p-2">
                <input type="radio" name="paymentMethod" value="card" id="cardPayment" onchange="togglePaymentMethod('razorpay')" class="form-radio text-blue-600 focus:ring-2 focus:ring-blue-400">
                <span class="text-gray-700 flex items-center">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQttfDaXuafMko9iHpyP5d6d0JdEQf6WJt5_w&s" alt="Card" class="w-10 h-10 mr-2">
                    Credit/ Debit Card
                </span>
            </label>
    
            <!-- UPI Option -->
            <label class="flex items-center cursor-pointer space-x-2 p-2">
                <input type="radio" name="paymentMethod" value="upi" id="upiPayment" onchange="togglePaymentMethod('upi')" class="form-radio text-green-600 focus:ring-2 focus:ring-green-400">
                <span class="text-gray-700 flex items-center">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRIAp6FtQ0KMGPR-QZfEpoHoXFqs4r_oCG49OyKO7Vg4DydXSzu6zpE1KtKzraHrfULuGo&usqp=CAU" alt="UPI" class="w-20 h-10 mr-3">
                </span>
            </label>
        </div>
    </div>
    
    <!-- Payment Details (Appears Below on Selection) -->
    <div id="paymentDetailsContainer">
        <!-- Razorpay Payment Details -->
        <div id="razorpayPaymentDetails" class="hidden bg-gray-100 p-4 rounded-lg shadow-md mt-3">
            <p class="text-gray-700 font-semibold">Pay securely using Razorpay:</p>
            <button type="button" onclick="payWithRazorpay()" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold mt-2 transition hover:bg-blue-800 w-full">
                Pay with Razorpay
            </button>
        </div>
    
        <!-- UPI Payment Details -->
        <div id="upiPaymentDetails" class="hidden bg-green-100 p-4 rounded-lg shadow-md mt-3">
            <p class="font-bold">Please scan the QR code to complete your UPI payment:</p>
            <img id="upiQR" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSuWCe8rmTu46DaxoIDiX0gHmaP5wVh8NHRDA&s" alt="UPI QR Code" class="block mx-auto my-3 w-40 h-40 border-2 border-green-500 rounded-lg">
            <button type="button"  class="bg-green-600 text-white px-6 py-2 rounded-lg font-bold mt-2 transition hover:bg-green-800 w-full">
                Scan UPI QR
            </button>
        </div>
    
        <!-- Order Confirm Button (Appears only for Cash) -->
        <div id="orderConfirmContainer" class="hidden mt-3 mb-2">
            <button type="button"  id="proceedButton" class="bg-yellow-500 text-white px-6 py-2 rounded-lg font-bold ">
                Order Confirm
            </button>
        </div>
    </div>

<!-- Final price -->
<p class="font-bold mt-2">Total Price to Pay: ‚Çπ<span id="finalAmount"></span></p></div>

<!-- Proceed to payment -->

        <script>
       // Extract totalPrice from URL
const urlParams = new URLSearchParams(window.location.search);
let totalPrice = parseFloat(urlParams.get('totalPrice')); // Get price from query string

// If no price is found, redirect or show an error
if (isNaN(totalPrice) || totalPrice <= 0) {
    alert("Error: Total price is missing or invalid!");
    window.location.href = "next.html"; // Redirect to the first page
}

// Default delivery charge
const deliveryCharge = 10;
let extraCharge = 0;
let finalAmount = totalPrice + deliveryCharge;

// Display initial values
document.getElementById('orderTotal').textContent = totalPrice.toFixed(2);
document.getElementById('deliveryCharge').textContent = deliveryCharge.toFixed(2);
document.getElementById('finalAmount').textContent = finalAmount.toFixed(2);

// Disable Proceed Button Initially
const proceedButton = document.getElementById('proceedButton');
proceedButton.disabled = true;

// Function to update final amount when payment method changes
function updateFinalAmount() {
    extraCharge = 0; // Reset extra charge

    // Get selected payment method
    let selectedPaymentMethod = document.querySelector('input[name="paymentMethod"]:checked');

    if (selectedPaymentMethod) {
        let paymentMethod = selectedPaymentMethod.value;

        if (paymentMethod === "cash") {
            extraCharge = 0; // No additional charge for COD
            document.getElementById('cardPaymentDetails').style.display = 'none';
            document.getElementById('upiPaymentDetails').style.display = 'none';
        } else if (paymentMethod === "card") {
            document.getElementById('cardPaymentDetails').style.display = 'block';
            document.getElementById('upiPaymentDetails').style.display = 'none';
        } else if (paymentMethod === "upi") {
            document.getElementById('upiPaymentDetails').style.display = 'block';
            document.getElementById('cardPaymentDetails').style.display = 'none';
        }
    }

    // Calculate final amount
    finalAmount = totalPrice + deliveryCharge + extraCharge;
    document.getElementById('finalAmount').textContent = finalAmount.toFixed(2);

    // Enable Proceed button only if payment method is selected
    proceedButton.disabled = !selectedPaymentMethod;
}

// Attach event listeners to payment method radio buttons
document.querySelectorAll('input[name="paymentMethod"]').forEach(input => {
    input.addEventListener("change", updateFinalAmount);
});

// Add event listeners to payment method radio buttons
document.querySelectorAll('input[name="paymentMethod"]').forEach((input) => {
    input.addEventListener("change", updateFinalAmount);
});
function togglePaymentMethod(method) {
    // Get the payment details and confirm button divs
    let orderConfirmContainer = document.getElementById('orderConfirmContainer');
    let razorpayPaymentDetails = document.getElementById('razorpayPaymentDetails');
    let upiPaymentDetails = document.getElementById('upiPaymentDetails');

    // Hide all divs initially
    orderConfirmContainer.classList.add('hidden');
    razorpayPaymentDetails.classList.add('hidden');
    upiPaymentDetails.classList.add('hidden');

    // Show the correct div based on the selected payment method
    if (method === 'cash') {
        orderConfirmContainer.classList.remove('hidden'); // Show Order Confirm button for Cash
    } else if (method === 'razorpay') {
        razorpayPaymentDetails.classList.remove('hidden'); // Show Razorpay payment details
    } else if (method === 'upi') {
        upiPaymentDetails.classList.remove('hidden'); // Show UPI payment details
    }
}


// Form Validation function
function validateForm() {
    let isValid = true;

    let errorMessages = document.querySelectorAll('.error');
    errorMessages.forEach(error => error.classList.remove("show"));

    // Name validation
    let name = document.getElementById("name").value.trim();
    let namePattern = /^[A-Za-z]{2,}(\s[A-Za-z]{2,})+$/;
    let nameError = document.getElementById("nameError");

    if (!namePattern.test(name)) {
        nameError.classList.add("show");
        nameError.textContent = "Enter a valid full name (First and Last name required).";
        isValid = false;
    }

    // Email validation
    let email = document.getElementById("email").value.trim();
    let emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    let emailError = document.getElementById("emailError");

    if (!emailPattern.test(email)) {
        emailError.classList.add("show");
        isValid = false;
    }

    // Phone validation
    let phone = document.getElementById("phone").value.trim();
    let phonePattern = /^[6-9]\d{9}$/;
    let phoneError = document.getElementById("phoneError");

    if (!phonePattern.test(phone)) {
        phoneError.classList.add("show");
        isValid = false;
    }

    // Country validation
    let country = document.getElementById("country").value.trim();
    let countryPattern = /^[A-Za-z\s]+$/;
    let countryError = document.getElementById("countryError");

    if (!countryPattern.test(country) || country.length < 3) {
        countryError.classList.add("show");
        countryError.textContent = "Enter a valid country name.";
        isValid = false;
    }

    // Payment Method validation
    let selectedPayment = document.querySelector('input[name="paymentMethod"]:checked');
    if (!selectedPayment) {
        isValid = false;
    }

    // Enable or disable the button based on validation
    proceedButton.disabled = !isValid;

    return isValid;
}

// Attach validation to input fields to enable the button when errors are fixed
document.querySelectorAll("input, select").forEach(input => {
    input.addEventListener("input", validateForm);
});

// Process Order Based on Payment Method
proceedButton.addEventListener("click", function () {
    if (validateForm()) {
        let selectedPayment = document.querySelector('input[name="paymentMethod"]:checked').value;

        if (selectedPayment === "cash") {
            // For Cash on Delivery, skip payment process and directly confirm the order
            alert("Order Confirmed!");
            window.location.href = "thankYouPage.html"; // Redirect for Cash on Delivery
        } else {
            // For UPI or Card payments, simulate payment processing
            alert("Processing Payment...");
            processPayment(selectedPayment); // Process for UPI/Card payments
        }
    } else {
        alert("Please correct the errors in the form.");
    }
});

// Process Payment (Mock Function for UPI/Card)
function processPayment(paymentMethod) {
    if (paymentMethod === "card") {
        submitCardPayment();
    } else if (paymentMethod === "upi") {
        openScanner();
    }
}

function updateFinalAmount() {
    extraCharge = 0; // Reset extra charge

    if (document.getElementById('cashPayment').checked) {
        document.getElementById('razorpayPaymentDetails').style.display = 'none';
        document.getElementById('upiPaymentDetails').style.display = 'none';
    } else if (document.getElementById('cardPayment').checked) {
        document.getElementById('razorpayPaymentDetails').style.display = 'block';
        document.getElementById('upiPaymentDetails').style.display = 'none';
    } else if (document.getElementById('upiPayment').checked) {
        document.getElementById('razorpayPaymentDetails').style.display = 'none';
        document.getElementById('upiPaymentDetails').style.display = 'block';
    }

    // Update final amount
    finalAmount = totalPrice + deliveryCharge + extraCharge;
    document.getElementById('finalAmount').textContent = finalAmount.toFixed(2);

    // Validate form
    validateForm();
}

// Add event listeners to payment options
document.querySelectorAll('input[name="paymentMethod"]').forEach((input) => {
    input.addEventListener('change', updateFinalAmount);
});



</script>
    </div>
    
<footer class="flex justify-center items-center  bg-red-500 text-white w-full p-4">
    <div id="last" class="text-center">
        <h2 class="text-xl font-semibold">üçî Savor Every Bite, Enjoy Every Moment! üçï</h2>
        <p class="mt-2 text-sm opacity-80">Bringing deliciousness to your doorstep, one order at a time.</p>

        <p class="mt-2">The key to more success is to have a lot of pillows. Always remember it's the jungle there's a lot of 'they' in there. After you overcome 'they' you will make it to paradise.</p>
        <div class="flex justify-center mt-4 space-x-4">
            <a href="#" class="hover:opacity-75 transition">
                <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Facebook" class="w-10 h-10 rounded-full">
            </a>
            <a href="#" class="hover:opacity-75 transition">
                <img src="https://store-images.s-microsoft.com/image/apps.45406.9007199266244427.4d45042b-d7a5-4a83-be66-97779553b24d.2a88a418-b96d-44a6-ad4f-5e0ee6289b2c" alt="Twitter" class="w-10 h-10 rounded-full">
            </a>
            <a href="#" class="hover:opacity-75 transition">
                <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram" class="w-10 h-10 rounded-full">
            </a>
        </div>
        
    </div>
    </footer>
<script src="script.js"></script>

</body>
</html>
